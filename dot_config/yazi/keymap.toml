# https://github.com/sxyazi/yazi/blob/latest/yazi-config/preset/keymap.toml

[manager]

prepend_keymap = [
  # https://yazi-rs.github.io/docs/tips/#dropping-to-shell
  # Dropping to the shell
  { on = [ "<C-s>" ], run = 'shell "$SHELL" --block --confirm', desc = "Open shell here" },

  # https://yazi-rs.github.io/docs/tips/#smart-enter
  # https://yazi-rs.github.io/docs/faq#why-separate-open-enter
  { on = [ "l" ], run = "plugin --sync smart-enter", desc = "Enter the child directory, or open the file" },

  # https://yazi-rs.github.io/docs/tips#parent-arrow
  { on = [ "K" ], run = "plugin --sync parent-arrow --args=-1", desc = "Navigation in the parent directory without leaving the CWD" },
  { on = [ "J" ], run = "plugin --sync parent-arrow --args=1", desc = "Navigation in the parent directory without leaving the CWD" },

  { on = [ "<Left>" ], run = "back", desc = "Go back to the previous directory" },
  { on = [ "<Right>" ], run = "forward", desc = "Go forward to the next directory" },
]

append_keymap = [
  # https://yazi-rs.github.io/docs/configuration/keymap#manager.shell
  { on = [ "e" ], run = 'shell "${EDITOR:=vi} \"$@\"" --block --confirm', desc = "Edit the selected files use $EDITOR" },
  { on = [ "E" ], run = 'shell "open -a /Applications/Emacs.app \"$@\"" --confirm', desc = "Edit the selected files use Emacs.app" },
]

[input]

prepend_keymap = [
  # https://yazi-rs.github.io/docs/tips/#close-input-by-esc
  # Close input by once `Esc` press (without entering Vi mode)
  # { on = [ "<Esc>" ], run = 'close', desc = "Cancel input" },
]
