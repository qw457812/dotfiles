#!/usr/bin/env bash

# ~/.macos — https://mths.be/macos

# https://github.com/mathiasbynens/dotfiles/blob/main/.macos
# https://github.com/yqrashawn/yqdotfiles/blob/master/.macos
# https://gist.github.com/mbinna/2357277
# https://gist.github.com/erikh/2260182

# 系统输入法(ABC): 禁用长按键输入特殊字符, 改为按键重复
# defaults read NSGlobalDomain ApplePressAndHoldEnabled ---> The domain/default pair of (kCFPreferencesAnyApplication, ApplePressAndHoldEnabled) does not exist
defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false

# System Settings -> Keyboard -> Key repeat rate (Fastest) / Delay until repeat (Shortest)
# defaults read NSGlobalDomain KeyRepeat ---> 2
# defaults read NSGlobalDomain InitialKeyRepeat ---> 15
# https://github.com/mathiasbynens/dotfiles/blob/main/.macos
# defaults write NSGlobalDomain KeyRepeat -int 1
# defaults write NSGlobalDomain InitialKeyRepeat -int 10
# https://gist.github.com/mbinna/2357277
# defaults write NSGlobalDomain KeyRepeat -int 0.02
# defaults write NSGlobalDomain InitialKeyRepeat -int 12
defaults write NSGlobalDomain KeyRepeat -int 1
defaults write NSGlobalDomain InitialKeyRepeat -int 12

# Enable full keyboard access for all controls (e.g. enable Tab in modal dialogs)
# defaults read NSGlobalDomain AppleKeyboardUIMode ---> 1
defaults write NSGlobalDomain AppleKeyboardUIMode -int 3

# https://wiki.nikiv.dev/macOS/#code
# Remove dock animation. https://www.reddit.com/r/apple/comments/6xg9xq/tip_of_the_day_one_thing_i_cant_live_without_in/
# defaults read com.apple.dock autohide-delay ---> The domain/default pair of (com.apple.dock, autohide-delay) does not exist
defaults write com.apple.dock autohide-delay -int 0
# defaults read com.apple.dock autohide-time-modifier ---> The domain/default pair of (com.apple.dock, autohide-time-modifier) does not exist
defaults write com.apple.dock autohide-time-modifier -float 0.4
killall Dock

# https://stackoverflow.com/questions/77248249/disable-macos-sonoma-text-insertion-point-cursor-caps-lock-indicator
# defaults read kCFPreferencesAnyApplication TSMLanguageIndicatorEnabled ---> The domain/default pair of (kCFPreferencesAnyApplication, TSMLanguageIndicatorEnabled) does not exist
defaults write kCFPreferencesAnyApplication TSMLanguageIndicatorEnabled 0
# ❯ defaults read /Library/Preferences/FeatureFlags/Domain/UIKit.plist redesigned_text_cursor ---> The domain/default pair of (/Library/Preferences/FeatureFlags/Domain/UIKit.plist, redesigned_text_cursor) does not exist
sudo defaults write /Library/Preferences/FeatureFlags/Domain/UIKit.plist redesigned_text_cursor -dict-add Enabled -bool NO
